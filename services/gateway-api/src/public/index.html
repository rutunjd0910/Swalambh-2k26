<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FHIR-Flow Demo</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="app-shell.css" />
  </head>
  <body>
    <div class="bg-orb orb-a"></div>
    <div class="bg-orb orb-b"></div>
    <div class="bg-grid"></div>

    <header class="hero">
      <div class="brand">FHIR-Flow</div>
      <div class="nav-buttons">
        <a class="nav-button" href="/">Pipeline</a>
        <a class="nav-button" href="/patients.html">Patient Profiles</a>
        <a class="nav-button" href="/uploads.html">Upload Center</a>
        <a class="nav-button" href="/resources.html">FHIR Resources</a>
        <a class="nav-button" href="/health.html">System Health</a>
      </div>
      <h1>Unstructured to FHIR, in seconds.</h1>
      <p>
        Paste a clinical note, scan summary, or lab text. The pipeline extracts
        fields, validates them, and returns FHIR R4 JSON.
      </p>
    </header>

    <section class="app-shell">
      <div id="statsBar" class="stats-bar"></div>
    </section>

    <section class="feature-grid">
      <a class="feature-card" href="/uploads.html">
        <h3>Upload Center</h3>
        <p>Track documents, sources, and file metadata.</p>
      </a>
      <a class="feature-card" href="/patients.html">
        <h3>Patient Profiles</h3>
        <p>See stored structured data and update logs.</p>
      </a>
      <a class="feature-card" href="/resources.html">
        <h3>FHIR Resources</h3>
        <p>Browse generated Patient and Observation resources.</p>
      </a>
      <a class="feature-card" href="/health.html">
        <h3>System Health</h3>
        <p>Check service status for the live pipeline.</p>
      </a>
    </section>

    <main class="panel">
      <section class="input-card">
        <div class="card-head">
          <h2>Document Input</h2>
          <span class="pill">Demo Pipeline</span>
        </div>
        <label class="label" for="docText">Clinical Text</label>
        <textarea
          id="docText"
          rows="10"
          placeholder="Patient: Jane Doe&#10;Age: 45&#10;Gender: female&#10;BP: 120/80 mmHg&#10;Lab: Hemoglobin 13.1 g/dL"
        ></textarea>
        <div class="actions">
          <button id="runBtn">Run Pipeline</button>
          <button id="fillBtn" class="ghost">Load Sample</button>
        </div>
        <div class="upload-zone" id="uploadZone">
          <div class="upload-text">
            <strong>Upload PDF or image</strong>
            <span>Drag and drop here or click to choose a file.</span>
          </div>
          <input id="fileInput" type="file" accept=".pdf,image/*,.txt" />
        </div>
        <div class="upload-actions">
          <button id="uploadBtn" class="ghost" disabled>Upload &amp; Process</button>
          <span class="hint">Use this for files instead of Run Pipeline.</span>
        </div>
        <div class="sample-links">
          <span>Indian patient image set:</span>
          <a href="/sample-uploads/patient-aarav.svg" download>Aarav Shah</a>
          <a href="/sample-uploads/patient-isha.svg" download>Isha Verma</a>
          <a href="/sample-uploads/patient-rohan.svg" download>Rohan Iyer</a>
        </div>
        <div id="status" class="status">Awaiting input.</div>
      </section>

      <section class="output-card">
        <div class="card-head">
          <h2>FHIR Output</h2>
          <span class="pill alt">R4 JSON</span>
        </div>
        <pre id="output">{
  "pipeline": "ready"
}</pre>
      </section>
    </main>

    <section class="activity-container">
      <h2>Recent Activity</h2>
      <ul id="activityFeed" class="activity-feed"></ul>
    </section>

    <footer class="footer">
      <span>Local demo only. No paid APIs.</span>
    </footer>

    <script src="app.js"></script>
    <script src="app-shell.js"></script>
  </body>
</html>
